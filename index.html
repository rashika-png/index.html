<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>KP Runner Animated</title>
<script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
<style>
body{margin:0;padding:0;background:#f0f0f0;}
#gameContainer{width:100vw;height:100vh;}
</style>
</head>
<body>
<div id="gameContainer"></div>
<script>
const config = {
  type: Phaser.AUTO,
  parent: 'gameContainer',
  width: 800,
  height: 500,
  physics: { default: 'arcade', arcade: { gravity: { y: 1000 } } },
  scene: { preload, create, update }
};

let player, cursors, ground, obstacles, coins, score = 0, scoreText;
let spawnTimer = 0;
let flagBorder;

const game = new Phaser.Game(config);

function preload() {
  this.load.image('ground', 'ground.png');
  this.load.image('kp', '/mnt/data/60b757c2-8064-4b02-a697-835b466f0a41.png'); // your uploaded KP Oli photo
  this.load.image('people', 'people.png'); 
  this.load.image('cash', 'cash.png');
}

function create() {
  ground = this.physics.add.staticGroup();
  ground.create(400, 480, 'ground').setScale(2).refreshBody();

  // Pastel Nepali-style border
  flagBorder = this.add.graphics();
  flagBorder.lineStyle(15, 0x93ccea, 1);
  flagBorder.fillStyle(0xfcc3d6, 1);
  flagBorder.fillRect(40, 40, 720, 420);
  flagBorder.strokeRect(40, 40, 720, 420);

  // Player with subtle running bounce
  player = this.physics.add.sprite(100, 400, 'kp').setScale(0.7);
  player.setCollideWorldBounds(true);
  player.setTintFill(0xff6666);

  // Floating cash
  const cash = this.add.sprite(player.x + 40, player.y - 60, 'cash').setScale(0.5);
  this.tweens.add({
    targets: cash,
    y: cash.y - 15,
    yoyo: true,
    repeat: -1,
    duration: 800,
    ease: 'Sine.inOut'
  });

  obstacles = this.physics.add.group();
  coins = this.physics.add.group();
  this.physics.add.collider(player, ground);
  this.physics.add.overlap(player, obstacles, hitObstacle, null, this);
  this.physics.add.overlap(player, coins, collectCoin, null, this);

  cursors = this.input.keyboard.createCursorKeys();
  scoreText = this.add.text(16,16,'Score: 0',{fontSize:'20px',fill:'#333'});

  // Running bounce animation
  this.tweens.add({
    targets: player,
    y: player.y - 10,
    yoyo: true,
    repeat: -1,
    duration: 300,
    ease: 'Sine.inOut'
  });

  // Intro text
  this.add.text(180, 70, 'KP flaunts cash...\nGen Z is coming!', {fontSize:'22px', fill:'#333', align:'center'});
}

function update(time, delta) {
  spawnTimer += delta;
  if(spawnTimer > 1000){
    spawnTimer = 0;
    spawnObstacle(this);
    if(Math.random()<0.5) spawnCoin(this);
  }

  if(cursors.space.isDown || this.input.activePointer.isDown){
    if(player.body.touching.down){
      player.setVelocityY(-500);
    }
  }

  obstacles.getChildren().forEach(o=>{if(o.x<-50)o.destroy();});
  coins.getChildren().forEach(c=>{if(c.x<-50)c.destroy();});

  scoreText.setText('Score: '+score);
}

function spawnObstacle(scene){
  const obs = obstacles.create(850,400,'people').setOrigin(0.5,1);
  obs.setVelocityX(-300);
  obs.body.setAllowGravity(false);
}

function spawnCoin(scene){
  const y = Phaser.Math.Between(300,400);
  const coin = coins.create(850,y,'cash');
  coin.setVelocityX(-250);
  coin.body.setAllowGravity(false);
}

function hitObstacle(playerObj, obstacle){
  this.physics.pause();
  playerObj.setTint(0xff0000);

  const msg = this.add.text(400,250,'We Won Gen Z',
    {fontSize:'32px', fill:'#ff88aa', fontStyle:'bold'}).setOrigin(0.5);

  // Flashing + shaking animation
  this.tweens.add({
    targets: msg,
    alpha: 0,
    duration: 200,
    yoyo: true,
    repeat: -1
  });
  this.tweens.add({
    targets: msg,
    x: 400 + 10,
    duration: 100,
    yoyo: true,
    repeat: -1
  });
}

function collectCoin(playerObj, coin){
  coin.destroy();
  score += 10;
}
</script>
</body>
</html>
